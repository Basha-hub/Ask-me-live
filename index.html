<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Host Control Panel</title>
 
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
 
  <!-- Inter (nice fallback if user has it) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <style>
    :root{
      /* lighter sea-teal tint so the campus photo stays visible */
      --overlay-start: rgba(5, 76, 102, 0.22);
      --overlay-end:   rgba(2, 26, 48, 0.32);
    }
    body{
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      min-height: 100vh;
    }
 
    /* === Background photo layer (reliable) === */
    .bg-wrap{ position: fixed; inset: 0; z-index: 0; overflow: hidden; }
    .bg-photo{
      position: absolute; inset: -12px; /* bleed for blur edges */
      width: calc(100vw + 24px);
      height: calc(100vh + 24px);
      object-fit: cover; object-position: center;
      filter: blur(8px) saturate(1.06) brightness(1.02);
      transform: scale(1.035); /* hide blur edges */
    }
    .bg-tint{
      position: absolute; inset: 0;
      background: linear-gradient(180deg, var(--overlay-start) 0%, var(--overlay-end) 100%);
    }
 
    /* === Glass card + inner surfaces === */
    .glass{
      background: rgba(210, 232, 255, 0.35);
      border: 1px solid rgba(255, 255, 255, 0.45);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 20px 60px rgba(15, 23, 42, 0.25);
    }
    .surface{
      background: rgba(255,255,255,0.70);
      border: 1px solid rgba(255,255,255,0.60);
    }
  </style>
</head>
 
<body class="relative min-h-screen flex items-center justify-center p-4">
  <!-- Background image (NO BUBBLES) -->
  <div class="bg-wrap" aria-hidden="true">
    <img src="university.png" alt="" class="bg-photo" />
    <div class="bg-tint"></div>
  </div>
 
  <!-- Main Content Card (slightly smaller and centered) -->
  <main class="relative z-10 w-full max-w-5xl rounded-2xl overflow-hidden glass">
    <div class="grid grid-cols-1 md:grid-cols-2">
      <!-- Left -->
      <section class="p-8 md:p-10 border-b md:border-b-0 md:border-r border-white/40">
        <h2 class="text-2xl md:text-3xl font-extrabold text-slate-900 drop-shadow-sm mb-6">
          Host Control Panel
        </h2>
 
        <!-- 1. Session Key -->
        <div class="mb-6">
          <label for="session-key" class="block text-sm font-semibold text-slate-700 mb-2">1. Session Key</label>
          <div class="flex gap-2">
            <input id="session-key" type="text" readonly
                   class="flex-1 px-4 py-3 rounded-lg border border-white/60 surface text-slate-800 shadow-inner placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-sky-300">
            <button id="create-session-btn"
              class="px-5 py-3 rounded-lg text-slate-900 font-semibold shadow
                     bg-pink-200 hover:bg-pink-300 focus:ring-2 focus:ring-pink-300 focus:outline-none transition">
              Create
            </button>
          </div>
        </div>
 
        <!-- 2. Transcribe Live -->
        <div class="mb-6">
          <label class="block text-sm font-semibold text-slate-700 mb-2">2. Transcribe Live (One 10s clip)</label>
          <div class="grid grid-cols-2 gap-3">
            <button id="start-btn" disabled
              class="px-5 py-3 rounded-lg font-semibold text-slate-900 shadow
                     bg-green-200 hover:bg-green-300 focus:ring-2 focus:ring-green-300 disabled:opacity-50 disabled:cursor-not-allowed transition">
              Start Class
            </button>
            <button id="stop-btn" disabled
              class="px-5 py-3 rounded-lg font-semibold text-slate-900 shadow
                     bg-rose-200 hover:bg-rose-300 focus:ring-2 focus:ring-rose-300 disabled:opacity-50 disabled:cursor-not-allowed transition">
              Stop Class
            </button>
          </div>
        </div>
 
        <!-- 3. Upload Pre-Recorded File -->
        <div class="mb-6">
          <label class="block text-sm font-semibold text-slate-700 mb-2">3. Upload Pre-Recorded File</label>
          <input id="file-input" type="file" accept="audio/*"
                 class="block w-full text-sm text-slate-700
                        file:mr-4 file:py-2.5 file:px-4 file:rounded-lg file:border file:border-white/60
                        file:bg-indigo-100 file:text-slate-900 hover:file:bg-indigo-200 file:shadow-sm
                        surface rounded-lg">
          <button id="upload-btn" disabled
            class="mt-3 w-full px-6 py-3 rounded-lg text-slate-900 font-semibold shadow
                   bg-sky-200 hover:bg-sky-300 focus:ring-2 focus:ring-sky-300 disabled:opacity-50 disabled:cursor-not-allowed transition">
            Upload and Process File
          </button>
        </div>
 
        <p id="status-message" class="text-sm text-slate-800 min-h-[1.25rem]">&nbsp;</p>
      </section>
 
      <!-- Right -->
      <section class="p-8 md:p-10 bg-white/40">
        <!-- Live Transcription -->
        <div class="mb-6">
          <div class="flex items-center justify-between mb-2">
            <h3 class="text-xl font-bold text-slate-900">Live Transcription</h3>
            <button id="fetch-transcript-btn"
              class="px-3 py-2 text-xs font-semibold rounded-lg shadow
                     bg-violet-200 hover:bg-violet-300 text-slate-900 focus:ring-2 focus:ring-violet-300">
              See/Refresh Transcript
            </button>
          </div>
          <div id="transcript-container"
               class="w-full h-48 p-4 surface rounded-lg shadow-inner overflow-y-auto text-slate-900">
            <p class="text-slate-600">Click the button to load transcript...</p>
          </div>
        </div>
 
        <!-- AI-Generated Questions -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <h3 class="text-xl font-bold text-slate-900">AI-Generated Questions</h3>
            <button id="fetch-questions-btn"
              class="px-3 py-2 text-xs font-semibold rounded-lg shadow
                     bg-teal-200 hover:bg-teal-300 text-slate-900 focus:ring-2 focus:ring-teal-300">
              See/Refresh Questions
            </button>
          </div>
          <ul id="questions-list"
              class="space-y-3 h-64 overflow-y-auto surface p-4 rounded-lg shadow-inner text-slate-900">
            <li class="text-slate-600">Click the button to load questions...</li>
          </ul>
        </div>
      </section>
    </div>
  </main>
 
  <!-- Supabase + Client JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="client.js"></script>
</body>
</html>